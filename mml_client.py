import time
import asyncio 
import threading
import json
import bmesh

if "bpy" in locals():
    import importlib
    importlib.reload(websockets)
    importlib.reload(mml_main)
else:
    import bpy
    from . import websockets
    from . import mml_main

class Status:
    disconnected = 0
    connected = 1
    
class MMLClient:
    instance = None
    status_strings = {
        Status.disconnected : "Disconnected",
        Status.connected : "Connected"
    }
    
    def __init__(self): # At some point I'll have to do without an img argument/field, tentatively here for the purpose of testing.
        if MMLClient.instance == None:
            MMLClient.instance = self
        elif MMLClient.instance != self:
            del self
            return
        self.status = Status.disconnected
        self.data_to_send = []
        
    def begin_connect_thread(self):
        if self.status == Status.connected:
            return
        connection = threading.Thread(target = self.start_connection)
        connection.daemon = True
        connection.start()
    
    def start_connection(self):
        print("Start connection")
        loop = asyncio.new_event_loop()
        asyncio.set_event_loop(loop)
        loop.run_until_complete(self.connect(None))
        loop.close()
        
    async def connect(self, data):
        print("Connect()")
        
        async with websockets.connect("ws://localhost:{}".format(str(self.port)), max_size=1000000000) as websocket:
            self.status = Status.connected
            print("Connected")
            previous_time = time.time()
            while True:
                if not websocket.open:
                    self.status = Status.disconnected
                    break
                while len(websocket.messages) > 0:
                    message = websocket.messages.popleft()
                    mml_main.MML.interpret(message)
                if len(self.data_to_send) > 0:
                    await websocket.send(self.data_to_send.pop())
                if time.time() > previous_time + 20.0:
                    previous_time = time.time()
                    data = json.dumps({"command":"ping"})
                    self.send_json(data)
                await asyncio.sleep(0.01)
            mml_main.MML.inform("Disconnected from MM")
            mml_main.MML.on_disconnect()
        
            
    def send(self, data):
        self.data_to_send.append(data)
        

    def send_json(self, data):
        self.data_to_send.append(data)
        
        
    def send_command(self, command, image_name, data):
        self.data_to_send.append("{}|{}|{}".format(command, image_name, data))
         

    def get_status_string(self):
        return MMLClient.status_strings[self.status]
        


class OBJECT_OT_connect(bpy.types.Operator):
    """Attempt to connect MML client to server."""
    bl_idname = "image.mml_connect"
    bl_label = "MML Connect"
    
    @classmethod
    def poll(cls, context):
        return context.active_object is not None

    def execute(self, context):
        MMLClient.instance.begin_connect_thread()
        return {'FINISHED'}



test_data = b"m-\x0b\xffm-\x0b\xffm-\x0b\xffl,\x0b\xffm-\x0b\xffn.\x0b\xffl,\n\xffj*\n\xffh)\t\xffg(\t\xffg'\t\xffg(\t\xffh)\t\xffh)\t\xffh(\t\xffg(\t\xffg'\t\xffg'\t\xffg'\t\xffg'\t\xffg'\t\xffg(\t\xffi)\n\xffi*\n\xffk+\n\xffl,\x0b\xffm-\x0b\xffm-\x0b\xffl,\n\xffm-\x0b\xffo0\x0c\xffq1\x0c\xffq1\x0c\xfft4\r\xffu5\r\xffu5\r\xffu4\r\xffr2\x0c\xffo/\x0b\xffm.\x0b\xffm-\x0b\xffl,\x0b\xffk+\n\xffj*\n\xffi)\n\xffi)\n\xffh(\t\xffg'\t\xffe&\t\xffe&\t\xffe&\t\xffg(\t\xfff&\t\xffi*\n\xffj+\n\xffj+\n\xffj+\n\xffi*\n\xffh)\t\xffh)\t\xffh(\t\xffg(\t\xffg(\t\xffj*\n\xffm-\x0b\xffl,\x0b\xffl-\x0b\xffl,\x0b\xffk+\n\xffm-\x0b\xffn.\x0b\xffm-\x0b\xffj+\n\xffh)\n\xffg(\t\xffg'\t\xfff&\t\xfff&\t\xfff&\t\xfff'\t\xfff'\t\xffe&\t\xffe&\t\xffe&\t\xfff'\t\xffg(\t\xffi)\n\xffj*\n\xffj+\n\xffk+\n\xffi)\n\xffh(\t\xffg(\t\xffg'\t\xffh(\t\xffk,\n\xffm-\x0b\xffn/\x0b\xffq1\x0c\xffr2\x0c\xffr2\x0c\xffq1\x0c\xffp0\x0c\xffn.\x0b\xffm-\x0b\xffm-\x0b\xffl,\n\xffj*\n\xffi)\n\xffi)\n\xffi)\n\xffg'\t\xffe&\t\xffe&\t\xfff&\t\xffg(\t\xffe&\t\xffh)\n\xffg(\t\xffj*\n\xffi*\n\xffh)\t\xffj*\n\xffh)\t\xffh(\t\xffg(\t\xffg(\t\xffk+\n\xffl,\x0b\xffl,\n\xffl,\x0b\xffk+\n\xffk+\n\xffl,\x0b\xffl,\x0b\xffm-\x0b\xffm-\x0b\xffk+\n\xffi)\n\xffg(\t\xfff'\t\xffe&\t\xffe&\t\xffe&\t\xffe&\t\xffe%\x08\xffd%\x08\xffd%\x08\xffe%\t\xfff'\t\xffh(\t\xffh)\n\xffi)\n\xffh)\t\xffg'\t\xfff'\t\xffe&\t\xffe&\t\xfff&\t\xffg'\t\xffg(\t\xffi*\n\xffk,\n\xffm-\x0b\xffo/\x0c\xffp0\x0c\xffo/\x0b\xffn/\x0b\xffn.\x0b\xffi*\n\xffh(\t\xffh)\n\xffi*\n\xffk+\n\xffj*\n\xfff'\t\xffe&\t\xffe&\t\xfff'\t\xffg'\t\xfff&\t\xfff&\t\xfff'\t\xffh(\t\xffh)\t\xffj*\n\xffj+\n\xffh)\t\xffh)\t\xffh(\t\xffg(\t\xffj+\n\xffj*\n\xffi*\n\xffj+\n\xffj*\n\xffj+\n\xffk,\n\xffl,\n\xffl,\x0b\xffl-\x0b\xffl-\x0b\xffk+\n\xffi)\n\xffg(\t\xfff'\t\xffe&\t\xffe&\t\xffe&\t\xfff&\t\xffe&\t\xffe&\t\xffe%\x08\xffd%\x08\xffc$\x08\xffe&\t\xfff'\t\xfff'\t\xfff'\t\xfff&\t\xffe&\t\xffe&\t\xffd%\x08\xffe&\t\xffg'\t\xffi*\n\xffi*\n\xffj*\n\xffk+\n\xffk,\n\xffl,\n\xffi*\n\xffg(\t\xffg(\t\xffg(\t\xffg'\t\xffh)\t\xffj*\n\xffh(\t\xffe&\t\xffe%\x08\xffe%\x08\xfff'\t\xfff&\t\xffe&\t\xffg(\t\xffh(\t\xffh)\t\xffi*\n\xffk,\n\xffk+\n\xffh)\n\xffh)\t\xffh(\t\xffg(\t\xffi*\n\xffi)\n\xffi)\n\xffi*\n\xffj*\n\xffj*\n\xffj*\n\xffk+\n\xffk+\n\xffk+\n\xffl,\n\xffk,\n\xffj*\n\xffi)\n\xffh(\t\xffg'\t\xfff'\t\xfff&\t\xfff'\t\xfff'\t\xfff&\t\xffe&\t\xffd%\x08\xffc$\x08\xffc$\x08\xffd%\x08\xffe&\t\xffe&\t\xfff&\t\xffe&\t\xffd%\x08\xffc$\x08\xffc$\x08\xffd$\x08\xffe&\t\xfff&\t\xfff'\t\xffh(\t\xffi)\n\xffh)\n\xffh(\t\xffg(\t\xffg(\t\xffg(\t\xffg(\t\xfff'\t\xfff'\t\xfff'\t\xffe&\t\xffe&\t\xfff'\t\xfff'\t\xffe&\t\xffi)\n\xffk,\n\xffj*\n\xffj+\n\xffk,\n\xffl,\n\xffk,\n\xffi)\n\xffh(\t\xffg(\t\xffh)\t\xffi)\n\xffi)\n\xffi)\n\xffi)\n\xffi*\n\xffj*\n\xffi*\n\xffj+\n\xffj+\n\xffj+\n\xffj*\n\xffk+\n\xffj+\n\xffj*\n\xffi*\n\xffi)\n\xffi)\n\xffi)\n\xffh)\n\xffi*\n\xffh(\t\xfff'\t\xffe&\t\xffd%\x08\xffd$\x08\xffe%\t\xfff'\t\xfff&\t\xfff&\t\xfff&\t\xffe&\t\xffe&\t\xffe%\x08\xffd%\x08\xffc$\x08\xffc$\x08\xffd$\x08\xffe&\t\xffg(\t\xffh(\t\xffh)\t\xffh)\t\xffh(\t\xffi)\n\xffi)\n\xffh)\t\xffg'\t\xfff'\t\xffh)\t\xffh)\n\xffh)\n\xffi)\n\xffk+\n\xffm-\x0b\xffm-\x0b\xffl-\x0b\xffl-\x0b\xffl,\x0b\xffj*\n\xffk,\n\xffi)\n\xffh(\t\xffh)\t\xffh)\t\xffi)\n\xffi*\n\xffi*\n\xffi*\n\xffi*\n\xffj*\n\xffj*\n\xffj*\n\xffj*\n\xffi*\n\xffi)\n\xffi)\n\xffj*\n\xffj*\n\xffj*\n\xffi*\n\xffj*\n\xffj+\n\xffj+\n\xffl,\n\xffl-\x0b\xffi*\n\xffh(\t\xfff'\t\xffg'\t\xffi)\n\xffi)\n\xffg'\t\xfff'\t\xfff'\t\xfff&\t\xfff&\t\xfff'\t\xfff'\t\xffe%\t\xffd%\x08\xffd%\x08\xffd$\x08\xffe%\x08\xfff'\t\xffh(\t\xffi*\n\xffj*\n\xffj*\n\xffk,\n\xffk+\n\xffj*\n\xffj*\n\xffk,\n\xffl,\x0b\xffm-\x0b\xffm.\x0b\xffm.\x0b\xffm.\x0b\xffm-\x0b\xffm-\x0b\xffl-\x0b\xffk,\n\xffi*\n\xffj*\n\xffg(\t\xffi)\n\xffh(\t\xffh)\t\xffi*\n\xffi*\n\xffj*\n\xffj*\n\xffj*\n\xffj*\n\xffj+\n\xffk+\n\xffj*\n\xffi)\n\xffh(\t\xffg'\t\xfff&\t\xfff'\t\xffg(\t\xffh(\t\xffi)\n\xffj*\n\xffl,\x0b\xffn.\x0b\xffo/\x0b\xffl,\x0b\xffj+\n\xffk+\n\xffl,\x0b\xffl,\x0b\xffk+\n\xffi*\n\xffh(\t\xffg(\t\xfff'\t\xfff'\t\xffg'\t\xfff'\t\xffh(\t\xffh(\t\xfff'\t\xffd%\x08\xffc$\x08\xffe%\x08\xffg'\t\xffi)\n\xffj*\n\xffk+\n\xffl,\n\xffl,\n\xffk,\n\xffm-\x0b\xffm-\x0b\xffk,\n\xffk+\n\xffk+\n\xffl,\n\xffl,\n\xffl,\n\xffl,\n\xffl,\n\xffj+\n\xffi*\n\xffh)\t\xffg'\t\xffg(\t\xffh)\t\xffh)\t\xffh)\t\xffi)\n\xffj*\n\xffk+\n\xffk+\n\xffk+\n\xffk+\n\xffk+\n\xffj*\n\xffi)\n\xffh(\t\xfff'\t\xffe&\t\xffd%\x08\xffd%\x08\xffd%\x08\xffe&\t\xffh(\t\xffk+\n\xffm.\x0b\xffn/\x0b\xffp0\x0c\xffo/\x0b\xffm-\x0b\xffm-\x0b\xffm-\x0b\xffl,\n\xffk+\n\xffj+\n\xffi*\n\xffh)\t\xffg(\t\xffh(\t\xffh)\n\xffh)\n\xffh(\t\xffh)\t\xffg(\t\xfff'\t\xfff&\t\xfff'\t\xffh)\t\xffj*\n\xffk+\n\xffl,\x0b\xffm-\x0b\xffm-\x0b\xffm-\x0b\xffh)\t\xffg'\t\xffh(\t\xffi)\n\xffi)\n\xffi*\n\xffj*\n\xffj+\n\xffj+\n\xffi*\n\xffh)\n\xffg(\t\xffg'\t\xffg'\t\xffg(\t\xffg(\t\xffg(\t\xffh(\t\xffj+\n\xffk+\n\xffk,\n\xffk,\n\xffk,\n\xffk+\n\xffj+\n\xffi*\n\xffh(\t\xfff'\t\xffe%\x08\xffd$\x08\xffc$\x08\xffd%\x08\xfff&\t\xffi)\n\xffl,\x0b\xffn.\x0b\xffm-\x0b\xffl,\x0b\xffi)\n\xffg(\t\xffj*\n\xffk+\n\xffl,\n\xffk,\n\xffk+\n\xffk+\n\xffj*\n\xffi*\n\xffi*\n\xffi*\n\xffh)\n\xffh)\n\xffh)\t\xffi)\n\xffi)\n\xffh)\n\xffh)\t\xffi)\n\xffj+\n\xffk+\n\xffl-\x0b\xffm-\x0b\xffm-\x0b\xffj*\n\xffe%\x08\xffe&\t\xffe&\t\xfff&\t\xffg'\t\xffh(\t\xffi)\n\xffi*\n\xffi*\n\xffh)\n\xffh(\t\xfff'\t\xfff'\t\xffg'\t\xffg'\t\xffg'\t\xffg'\t\xfff'\t\xffj*\n\xffk+\n\xffk,\n\xffk,\n\xffk+\n\xffk+\n\xffj+\n\xffj*\n\xffh)\t\xfff&\t\xffd%\x08\xffc$\x08\xffc$\x08\xffe&\t\xffg(\t\xffj+\n\xffn.\x0b\xffp0\x0c\xffo/\x0b\xffn.\x0b\xffj*\n\xffg'\t\xffe%\x08\xffd%\x08\xffe%\x08\xffe&\t\xffe&\t\xfff'\t\xffg'\t\xffg'\t\xffg'\t\xffg'\t\xfff'\t\xfff'\t\xffg'\t\xffh(\t\xffh(\t\xffi)\n\xffi*\n\xffj*\n\xffj*\n\xffj*\n\xffj*\n\xffk+\n\xffi)\n\xffd%\x08\xffc$\x08\xffd$\x08\xffd%\x08\xffe%\x08\xffe&\t\xfff'\t\xffh)\t\xffi)\n\xffh)\n\xffh(\t\xffg(\t\xffg'\t\xffg(\t\xffg'\t\xffg'\t\xfff'\t\xfff'\t\xffe&\t\xffi)\n\xffj*\n\xffk+\n\xffk+\n\xffj+\n\xffj*\n\xffi)\n\xffh(\t\xfff'\t\xffe%\x08\xffc$\x08\xffc$\x08\xffd$\x08\xfff'\t\xffi)\n\xffk,\n\xffn/\x0b\xffp1\x0c\xffo0\x0c\xffo/\x0b\xffl,\x0b\xffh(\t\xfff&\t\xffe%\x08\xffe%\x08\xfff&\t\xfff'\t\xfff'\t\xfff'\t\xfff'\t\xfff'\t\xfff&\t\xfff'\t\xfff'\t\xfff'\t\xffg'\t\xffg(\t\xffg'\t\xffg'\t\xffg'\t\xfff'\t\xffe&\t\xffd%\x08\xffd$\x08\xffc$\x08\xffc$\x08\xffd%\x08\xffd%\x08\xffd%\x08\xffe%\x08\xffe%\t\xffe&\t\xffg(\t\xffh(\t\xffh(\t\xffg(\t\xffh(\t\xffh)\n\xffh)\t\xffh(\t\xffg(\t\xfff'\t\xfff&\t\xffe&\t\xffg(\t\xffi*\n\xffj+\n\xffk+\n\xffj+\n\xffi)\n\xffg(\t\xffe&\t\xffd%\x08\xffd%\x08\xffd%\x08\xffd%\x08\xffd%\x08\xfff'\t\xffi*\n\xffm-\x0b\xffp0\x0c\xffr2\x0c\xffr2\x0c\xffr2\x0c\xffp0\x0c\xffk,\n\xfff'\t\xffe&\t\xffe&\t\xfff&\t\xfff'\t\xfff'\t\xfff&\t\xfff&\t\xfff&\t\xfff&\t\xfff'\t\xfff'\t\xffg'\t\xffg'\t\xffg'\t\xffg(\t\xffg(\t\xffg(\t\xffg(\t\xffh(\t\xffh(\t\xffh)\t\xffh(\t\xffg(\t\xfff'\t\xfff&\t\xffe&\t\xffe&\t\xffe&\t\xffg'\t\xffm-\x0b\xffl,\n\xffg(\t\xffh(\t\xffh(\t\xffh(\t\xffh)\n\xffh)\n\xffh(\t\xffg(\t\xfff'\t\xffe&\t\xffg'\t\xffh)\t\xffj*\n\xffj+\n\xffj*\n\xffi)\n\xffg'\t\xffe%\x08\xffd$\x08\xffd%\x08\xffe%\x08\xffe&\t\xfff&\t\xffg'\t\xffk+\n\xffq1\x0c\xfft4\r\xfft4\r\xfft4\r\xffs3\r\xffr2\x0c\xffo/\x0b\xffj+\n\xfff&\t\xffg(\t\xffg'\t\xfff&\t\xfff&\t\xfff'\t\xfff'\t\xfff'\t\xfff&\t\xfff'\t\xffg'\t\xffg(\t\xffg(\t\xffh(\t\xffi*\n\xffj+\n\xffk,\n\xffl-\x0b\xffl-\x0b\xffm-\x0b\xffn/\x0b\xffo/\x0b\xffo/\x0b\xffl,\x0b\xffi*\n\xffh)\t\xffh(\t\xffh(\t\xffm-\x0b\xffo0\x0c\xffj*\n\xffh)\n\xffh)\t\xffh(\t\xffh)\t\xffh)\t\xffh(\t\xffh(\t\xffg(\t\xfff'\t\xffe&\t\xfff'\t\xffg(\t\xffi)\n\xffj*\n\xffj*\n\xffi)\n\xffg'\t\xffe%\x08\xffd$\x08\xffd%\x08\xffe&\t\xfff'\t\xffg'\t\xffh)\t\xffo/\x0b\xffs3\r\xfft4\r\xfft4\r\xffs3\r\xffr2\x0c\xffq1\x0c\xffo0\x0c\xffl,\x0b\xffh(\t\xffh)\t\xfff&\t\xfff&\t\xffe&\t\xfff&\t\xffe&\t\xfff&\t\xfff&\t\xfff'\t\xffg'\t\xffg(\t\xffi)\n\xffi)\n\xffi*\n\xffl,\n\xffm-\x0b\xffn/\x0b\xffo/\x0c\xffp0\x0c\xffr2\x0c\xffs3\r\xffr2\x0c\xffo/\x0b\xffm-\x0b\xffm-\x0b\xffm-\x0b\xffn.\x0b\xffn.\x0b\xffn/\x0b\xffk,\n\xffg(\t\xffg'\t\xffg(\t\xffh(\t\xffh(\t\xffh)\t\xffg(\t\xffg'\t\xffe&\t\xffe&\t\xffg'\t\xffg(\t\xffh(\t\xffi)\n\xffi)\n\xffi)\n\xffg(\t\xfff&\t\xffe%\x08\xffe&\t\xfff'\t\xffg(\t\xffh(\t\xffi*\n\xffp0\x0c\xffr2\x0c\xffr2\x0c\xffr2\x0c\xffr2\x0c\xffq1\x0c\xffp0\x0c\xffo/\x0b\xffm-\x0b\xffi*\n\xffi)\n\xffg'\t\xfff'\t\xffe%\x08\xffe&\t\xfff'\t\xfff'\t\xfff'\t\xfff'\t\xffg(\t\xffh(\t\xffi)\n\xffk+\n\xffl,\x0b\xffl-\x0b\xffn.\x0b\xffo/\x0b\xffo0\x0c\xffq1\x0c\xffs3\x0c\xffs3\r\xffr2\x0c\xffq1\x0c\xffo/\x0b\xffn/\x0b\xffn/\x0b\xffn.\x0b\xffn.\x0b\xffo/\x0b\xffn.\x0b\xffl,\x0b\xffl,\x0b\xffk,\n\xffk,\n\xffl,\x0b\xffk+\n\xffh)\n\xffg'\t\xffe&\t\xfff'\t\xffg(\t\xffh(\t\xffh)\n\xffi*\n\xffj*\n\xffj+\n\xffj*\n\xffh(\t\xffg(\t\xffh(\t\xffh(\t\xffh)\n\xffi)\n\xffi*\n\xffm-\x0b\xffn/\x0b\xffo0\x0c\xffo0\x0c\xffp0\x0c\xffp1\x0c\xffo/\x0b\xffn.\x0b\xffl-\x0b\xffj*\n\xffi)\n\xffh(\t\xffh(\t\xfff'\t\xffg'\t\xffi)\n\xffi*\n\xffj*\n\xffj+\n\xffk+\n\xffk+\n\xffk,\n\xffk,\n\xffl,\x0b\xffn.\x0b\xffo/\x0b\xffo/\x0b\xffo0\x0c\xffq1\x0c\xffr2\x0c\xffr3\x0c\xffs3\x0c\xffq2\x0c\xffo/\x0b\xffm.\x0b\xffm-\x0b\xffl,\x0b\xffm.\x0b\xffo0\x0c\xffn/\x0b\xffn/\x0b\xffp0\x0c\xffo/\x0c\xffo/\x0b\xffo/\x0b\xffl,\x0b\xffi)\n\xffg(\t\xffg'\t\xffh(\t\xffi)\n\xffj*\n\xffk+\n\xffk,\n\xffk,\n\xffl,\x0b\xffl,\x0b\xffk+\n\xffj*\n\xffi*\n\xffi*\n\xffi)\n\xffi)\n\xffi)\n\xffi)\n\xffk,\n\xffn.\x0b\xffo/\x0b\xffn/\x0b\xffo/\x0b\xffn/\x0b\xffm-\x0b\xffk+\n\xffi)\n\xffi)\n\xffg(\t\xffg(\t\xffh(\t\xffh(\t\xffg'\t\xfff'\t\xffg(\t\xffi*\n\xffk,\n\xffl-\x0b\xffm-\x0b\xffm-\x0b\xffm.\x0b\xffn.\x0b\xffo/\x0b\xffo/\x0b\xffo/\x0b\xffo/\x0c\xffp0\x0c\xffp0\x0c\xffp0\x0c\xffq1\x0c\xffq1\x0c\xffn/\x0b\xffl,\x0b\xffl,\x0b\xffp0\x0c\xffp0\x0c\xffn/\x0b\xffo/\x0b\xffq1\x0c\xffp1\x0c\xffp0\x0c\xffo0\x0c\xffl-\x0b\xffh)\n\xffg(\t\xffg(\t\xffh)\n\xffj*\n\xffk,\n\xffl,\x0b\xffm-\x0b\xffl-\x0b\xffm-\x0b\xffm.\x0b\xffl-\x0b\xffk+\n\xffj+\n\xffj*\n\xffi)\n\xffi)\n\xffh)\n\xffh)\t\xffh)\n\xffk+\n\xffn.\x0b\xffm.\x0b\xffm.\x0b\xffm-\x0b\xffk,\n\xffi*\n\xffh)\t\xffh(\t\xffg'\t\xfff'\t\xffg'\t\xffi)\n\xffg(\t\xfff'\t\xffg'\t\xffh)\t\xffk,\n\xffm-\x0b\xffm-\x0b\xffm.\x0b\xffn.\x0b\xffn/\x0b\xffo/\x0b\xffn/\x0b\xffn.\x0b\xffo0\x0c\xffo0\x0c\xffo/\x0b\xffm-\x0b\xffn.\x0b\xffp0\x0c\xffq1\x0c\xffo/\x0b\xffo/\x0b\xffp0\x0c\xffo/\x0b\xffn.\x0b\xffo/\x0b\xffq1\x0c\xffq1\x0c\xffo/\x0c\xffo/\x0b\xffl-\x0b\xffg(\t\xffg'\t\xffg(\t\xffh)\n\xffj+\n\xffl,\n\xffl-\x0b\xffl-\x0b\xffm-\x0b\xffm.\x0b\xffn.\x0b\xffl-\x0b\xffj*\n\xffj*\n\xffi*\n\xffi)\n\xffh)\n\xffh)\n\xffh)\n\xffh(\t\xffh(\t\xffl,\x0b\xffm-\x0b\xffl-\x0b\xffl,\x0b\xffk+\n\xffi)\n\xffh)\t\xffg(\t\xfff'\t\xfff&\t\xfff'\t\xffh(\t\xffi*\n\xffi)\n\xffi*\n\xffk+\n\xffl,\n\xffl,\x0b\xffm-\x0b\xffm-\x0b\xffn.\x0b\xffn.\x0b\xffn.\x0b\xffm-\x0b\xffl-\x0b\xffm.\x0b\xffm-\x0b\xffl,\x0b\xffn.\x0b\xffp0\x0c\xffp0\x0c\xffq1\x0c\xffq2\x0c\xffp0\x0c\xffo0\x0c\xffn.\x0b\xffn.\x0b\xffp0\x0c\xffq1\x0c\xffp0\x0c\xffn.\x0b\xffn.\x0b\xffl,\n\xffg(\t\xffg(\t\xffg(\t\xffi)\n\xffj*\n\xffk+\n\xffl,\n\xffl,\x0b\xffm-\x0b\xffn.\x0b\xffn.\x0b\xffl-\x0b\xffi*\n\xffg(\t\xffg'\t\xffg(\t\xffg(\t\xffh(\t\xffh(\t\xffh(\t\xffh)\t\xffk+\n\xffl-\x0b\xffk+\n\xffk,\n\xffj+\n\xffi)\n\xffh(\t\xffg'\t\xfff'\t\xfff&\t\xffe&\t\xfff&\t\xffg'\t\xffh)\n\xffi*\n\xffi*\n\xffj*\n\xffl,\x0b\xffl,\x0b\xffl,\x0b\xffl-\x0b\xffm-\x0b\xffm-\x0b\xffl,\x0b\xffk+\n\xffk+\n\xffl,\x0b\xffj+\n\xffo/\x0b\xffr2\x0c\xffr2\x0c\xffq1\x0c\xffr2\x0c\xffp0\x0c\xffn/\x0b\xffm-\x0b\xffn.\x0b\xffq1\x0c\xffq1\x0c\xffo/\x0b\xffm-\x0b\xffl-\x0b\xffl,\x0b\xffh(\t\xffh(\t\xffh(\t\xffj*\n\xffj+\n\xffk+\n\xffk+\n\xffl,\x0b\xffm-\x0b\xffm-\x0b\xffm-\x0b\xffl,\n\xffi*\n\xffg(\t\xfff'\t\xfff'\t\xffe&\t\xffe&\t\xffg'\t\xffh)\n\xffj*\n\xffl,\n\xffl,\n\xffj+\n\xffk+\n\xffj*\n\xffh)\t\xffh(\t\xfff'\t\xfff&\t\xffe&\t\xffe%\x08\xffd%\x08\xffe%\t\xfff'\t\xfff'\t\xfff&\t\xffg(\t\xffi*\n\xffj*\n\xffj+\n\xffk+\n\xffl,\n\xffl,\n\xffk+\n\xffj*\n\xffi*\n\xffj*\n\xffk+\n\xffp0\x0c\xffq1\x0c\xffq2\x0c\xffp0\x0c\xffp0\x0c\xffm-\x0b\xffl-\x0b\xffn.\x0b\xffq1\x0c\xffq1\x0c\xffq1\x0c\xffo0\x0c\xffn.\x0b\xffl,\n\xffk+\n\xffh)\t\xffh)\n\xffi)\n\xffj+\n\xffl,\n\xffl-\x0b\xffm-\x0b\xffm-\x0b\xffl-\x0b\xffl-\x0b\xffl,\x0b\xffj+\n\xffh)\n\xffg'\t\xfff'\t\xffe&\t\xffd$\x08\xffd$\x08\xfff&\t\xffh)\n\xffj+\n\xffl,\n\xffk+\n\xffj+\n\xffk+\n\xffj*\n\xffi*\n\xffi)\n\xfff'\t\xffe%\x08\xffd%\x08\xffd%\x08\xffd%\x08\xffd%\x08\xffd%\x08\xffe&\t\xffg'\t\xffh(\t\xffh)\t\xffi*\n\xffj*\n\xffj*\n\xffj+\n\xffk+\n\xffj*\n\xffh)\n\xffh)\t\xffi)\n\xffj+\n\xffn/\x0b\xffp1\x0c\xffn.\x0b\xffk,\n\xffm-\x0b\xffl,\x0b\xffm.\x0b\xffo/\x0b\xffq1\x0c\xffq1\x0c\xffq1\x0c\xffo0\x0c\xffm.\x0b\xffj+\n\xffi*\n\xffh)\n\xffh)\t\xffi)\n\xffl,\x0b\xffn.\x0b\xffo/\x0b\xffn/\x0b\xffm.\x0b\xffl-\x0b\xffl,\n\xffj+\n\xffi)\n\xffg'\t\xfff'\t\xffe&\t\xffd%\x08\xffc$\x08\xffc$\x08\xffe&\t\xffh)\n\xffj+\n\xffk+\n\xffj+\n\xffj+\n\xffj*\n\xffi*\n\xffi)\n\xffj*\n\xffh(\t\xffg'\t\xfff&\t\xfff&\t\xfff'\t\xfff'\t\xffg(\t\xffh(\t\xffj*\n\xffk+\n\xffk+\n\xffk+\n\xffj+\n\xffj*\n\xffj+\n\xffj+\n\xffj+\n\xffi*\n\xffh(\t\xffh)\n\xffk+\n\xffm-\x0b\xffn.\x0b\xffl,\x0b\xffm-\x0b\xffk,\n\xffj*\n\xffk,\n\xffo/\x0b\xffo0\x0c\xffo/\x0b\xffo/\x0b\xffn.\x0b\xffk,\n\xffi*\n\xffh)\n\xffh(\t\xffh)\t\xffi*\n\xffk,\n\xffo/\x0b\xffq1\x0c\xffp0\x0c\xffn.\x0b\xffm-\x0b\xffl,\n\xffj*\n\xffh)\t\xffg'\t\xfff&\t\xffe%\x08\xffe%\x08\xffd%\x08\xffd$\x08\xffe&\t\xffh(\t\xffi*\n\xffj+\n\xffj+\n\xffj+\n\xffj+\n\xffk+\n\xffj+\n\xffj*\n\xffi*\n\xffj*\n\xffh)\t\xffg(\t\xffh(\t\xffj*\n\xffm-\x0b\xffm.\x0b\xffm.\x0b\xffm-\x0b\xffn.\x0b\xffm.\x0b\xffk+\n\xffj*\n\xffi*\n\xffi*\n\xffj*\n\xffj*\n\xffi)\n\xffi)\n\xffk+\n\xffl,\n\xffk,\n\xffk+\n\xffj+\n\xffi*\n\xffi*\n\xffj*\n\xffl,\x0b\xffk,\n\xffj*\n\xffj*\n\xffj*\n\xffi*\n\xffh)\t\xffg(\t\xffg(\t\xffh(\t\xffi*\n\xffm-\x0b\xffp0\x0c\xffs3\r\xffr2\x0c\xffp0\x0c\xffn.\x0b\xffl-\x0b\xffj*\n\xffh)\n\xffh(\t\xfff'\t\xffe&\t\xffe%\t\xffe%\x08\xffe&\t\xfff&\t\xffg(\t\xffi)\n\xffj*\n\xffk+\n\xffk+\n\xffl,\n\xffm-\x0b\xffn.\x0b\xffl,\x0b\xffj*\n\xffk,\n\xffi*\n\xffj*\n\xffk,\n\xffm.\x0b\xffq1\x0c\xffq1\x0c\xffq1\x0c\xffp0\x0c\xffo/\x0b\xffn/\x0b\xffl,\x0b\xffj*\n\xffi*\n\xffi*\n\xffi*\n\xffi*\n\xffh)\n\xffh(\t\xffi*\n\xffi*\n\xffi)\n\xffi)\n\xffh)\n\xffh(\t\xffh(\t\xffi)\n\xffj*\n\xffh(\t\xffh(\t\xffg(\t\xffh(\t\xffg(\t\xffg'\t\xfff'\t\xfff'\t\xffh(\t\xffj*\n\xffn.\x0b\xffr2\x0c\xffu5\r\xfft4\r\xffs3\x0c\xffq1\x0c\xffn/\x0b\xffk+\n\xffi)\n\xffh(\t\xffg(\t\xfff&\t\xffe&\t\xfff&\t\xfff'\t\xfff&\t\xffg'\t\xffi*\n\xffk+\n\xffk,\n\xffk+\n\xffl-\x0b\xffn.\x0b\xffo/\x0b\xffo/\x0b\xffk+\n\xffm-\x0b\xffl-\x0b\xffm.\x0b\xffn.\x0b\xffo/\x0b\xffr2\x0c\xffr2\x0c\xffr2\x0c\xffq1\x0c\xffp0\x0c\xffo/\x0b\xffm-\x0b\xffk,\n\xffk+\n\xffl,\n\xffj+\n\xffi)\n\xffh(\t\xffg(\t\xffh(\t\xffh)\t\xffh(\t\xffh(\t\xffh(\t\xffg(\t\xffg(\t\xffh(\t\xffi)\n\xffg(\t\xffg(\t\xffg'\t\xffg(\t\xfff'\t\xfff&\t\xffe&\t\xfff&\t\xffh(\t\xffj+\n\xfft4\r\xffu5\r\xffs3\r\xffr2\x0c\xffs3\r\xffs3\r\xffq1\x0c\xffl-\x0b\xffh)\n\xfff'\t\xffg(\t\xffg'\t\xfff'\t\xfff'\t\xfff&\t\xfff&\t\xffg(\t\xffk+\n\xffl,\x0b\xffl-\x0b\xffl,\x0b\xffm-\x0b\xffo/\x0b\xffp0\x0c\xffo/\x0c\xffm.\x0b\xffn.\x0b\xffo/\x0c\xffp0\x0c\xffo/\x0b\xffp0\x0c\xffr2\x0c\xffq1\x0c\xffp0\x0c\xffo/\x0b\xffn.\x0b\xffn.\x0b\xffm-\x0b\xffl-\x0b\xffl-\x0b\xffm-\x0b\xffk+\n\xffj*\n\xffi*\n\xffi)\n\xffh(\t\xffh(\t\xffh(\t\xffh(\t\xffh(\t\xffh(\t\xffh(\t\xffg(\t\xffg(\t\xffg(\t\xffg(\t\xffg'\t\xffg'\t\xfff'\t\xffe%\x08\xffd%\x08\xfff'\t\xffj*\n\xffn.\x0b\xffv6\r\xffu5\r\xffs3\x0c\xffq2\x0c\xffs3\r\xffu5\r\xffs3\x0c\xffl-\x0b\xffg(\t\xfff&\t\xfff'\t\xffg'\t\xffg'\t\xfff'\t\xffe&\t\xffe&\t\xffh(\t\xffl-\x0b\xffn.\x0b\xffn.\x0b\xffm-\x0b\xffn.\x0b\xffo/\x0b\xffp0\x0c\xffo/\x0b\xffo/\x0b\xffo/\x0b\xffp0\x0c\xffq1\x0c\xffp0\x0c\xffq1\x0c\xffq1\x0c\xffn/\x0b\xffm-\x0b\xffm-\x0b\xffl-\x0b\xffj*\n\xffk+\n\xffl-\x0b\xffl,\x0b\xffl-\x0b\xffk,\n\xffk+\n\xffj+\n\xffi*\n\xffh(\t\xffh(\t\xffh(\t\xffh(\t\xffh(\t\xffh(\t\xffh(\t\xffh(\t\xffg(\t\xffg(\t\xffg(\t\xfff'\t\xffg'\t\xfff'\t\xffe%\x08\xffd%\x08\xffi*\n\xffn.\x0b\xffs3\x0c\xffv6\x0e\xffv6\r\xffs3\r\xffs3\r\xffu5\r\xffv6\r\xffs3\r\xffk+\n\xffh(\t\xfff&\t\xfff'\t\xfff'\t\xfff&\t\xffe%\x08\xffe%\t\xffe&\t\xffi*\n\xffm.\x0b\xffn.\x0b\xffm-\x0b\xffm.\x0b\xffo/\x0b\xffp0\x0c\xffp0\x0c\xffo/\x0b\xffo/\x0b\xffp0\x0c\xffq1\x0c\xffq1\x0c\xffq1\x0c\xffq1\x0c\xffq1\x0c\xffm-\x0b\xffl,\x0b\xffm.\x0b\xffk,\n\xffi*\n\xffi*\n\xffi*\n\xffj+\n\xffk,\n\xffk,\n\xffj+\n\xffk+\n\xffj*\n\xffh)\n\xffg'\t\xffg(\t\xffg(\t\xffh(\t\xffh(\t\xffh)\t\xffh)\t\xffh)\t\xffh(\t\xffg(\t\xffg'\t\xfff'\t\xffe&\t\xffd$\x08\xffd%\x08\xffh)\n\xffn.\x0b\xffs3\r\xffu5\r\xffv6\x0e\xfft4\r\xfft4\r\xffu5\r\xfft4\r\xffo/\x0c\xffm-\x0b\xffj*\n\xfff'\t\xfff&\t\xffd%\x08\xffc$\x08\xffe&\t\xffe&\t\xfff'\t\xffi*\n\xffm-\x0b\xffm.\x0b\xffl-\x0b\xffn.\x0b\xffo/\x0b\xffo/\x0c\xffo/\x0b\xffo/\x0b\xffo/\x0b\xffo0\x0c\xffp0\x0c\xffq1\x0c\xffq1\x0c\xffn.\x0b\xffi*\n\xfff'\t\xfff&\t\xffg(\t\xffh)\n\xffh)\n\xffh)\t\xffg(\t\xffg'\t\xffg'\t\xffh(\t\xffi)\n\xffj*\n\xffi)\n\xffh(\t\xffg(\t\xfff'\t\xfff&\t\xffg'\t\xffg(\t\xffh(\t\xffh(\t\xffh(\t\xffh)\t\xffg(\t\xffh(\t\xffg(\t\xffe&\t\xffc$\x08\xffd%\x08\xfff&\t\xffk+\n\xffq1\x0c\xfft4\r\xffv6\r\xffu5\r\xfft4\r\xffu5\r\xffs3\r\xffp0\x0c\xffl,\x0b\xffi)\n\xfff'\t\xffe&\t\xffe&\t\xffg'\t\xffg'\t\xffh(\t\xffh(\t\xffi)\n\xffj*\n\xffk+\n\xffl,\x0b\xffl,\x0b\xffl,\x0b\xffm-\x0b\xffn.\x0b\xffn.\x0b\xffo/\x0b\xffo/\x0b\xffn/\x0b\xffn.\x0b\xffm-\x0b\xffj*\n\xffg'\t\xfff'\t\xffe%\x08\xffe&\t\xffg'\t\xfff'\t\xfff&\t\xffe%\t\xffd%\x08\xffd%\x08\xffd%\x08\xfff&\t\xfff'\t\xffe&\t\xfff&\t\xffg'\t\xffe&\t\xffe%\x08\xffe%\x08\xfff'\t\xffg(\t\xffh(\t\xffh(\t\xffh)\t\xffh(\t\xffh)\t\xffh(\t\xfff'\t\xffd$\x08\xffd%\x08\xffe&\t\xffi*\n\xffp0\x0c\xfft4\r\xffv6\r\xfft4\r\xffs3\r\xfft4\r\xffs3\r\xffs3\r\xffp0\x0c\xffm-\x0b\xffj*\n\xffh(\t\xffh(\t\xffh(\t\xffi)\n\xffj*\n\xffj*\n\xffi*\n\xffi)\n\xffi)\n\xffi*\n\xffi*\n\xffi*\n\xffk+\n\xffm-\x0b\xffm-\x0b\xffn.\x0b\xffm-\x0b\xffm-\x0b\xffl-\x0b\xffk+\n\xffh)\t\xffg'\t\xfff&\t\xffe&\t\xffe&\t\xffe%\x08\xffc$\x08\xffc$\x08\xffc$\x08\xffc$\x08\xffc$\x08\xffd$\x08\xffd%\x08\xffd%\x08\xffd%\x08\xffd%\x08\xffd%\x08\xffd$\x08\xffd%\x08\xffd%\x08\xffd%\x08\xfff'\t\xffg(\t\xffh(\t\xffh)\t\xffh)\t\xffh)\t\xffh(\t\xfff&\t\xffd%\x08\xffe%\x08\xffe&\t\xffj*\n\xffo/\x0b\xffo/\x0b\xffs3\r\xffr2\x0c\xffq1\x0c\xffq1\x0c\xffq1\x0c\xfft4\r\xffr2\x0c\xffn/\x0b\xffl,\n\xffi*\n\xffi)\n\xffi)\n\xffi*\n\xffj*\n\xffj*\n\xffj*\n\xffi*\n\xffi)\n\xffi)\n\xffi*\n\xffi*\n\xffi*\n\xffl,\x0b\xffl-\x0b\xffl,\x0b\xffk+\n\xffj*\n\xffi*\n\xffi*\n\xffh)\n\xfff'\t\xffe&\t\xfff&\t\xffd%\x08\xffd$\x08\xffc$\x08\xffc$\x08\xffc$\x08\xffc$\x08\xffc$\x08\xffc$\x08\xffd$\x08\xffd%\x08\xffe&\t\xffd%\x08\xffe%\x08\xffe%\x08\xffe%\x08\xffd%\x08\xffe&\t\xfff'\t\xffh(\t\xffi*\n\xffi)\n\xffi)\n\xffh)\t\xffg(\t\xfff&\t\xffe&\t\xffe&\t\xfff&\t\xffh(\t\xffk+\n\xffj*\n\xffn.\x0b\xffn.\x0b\xffn.\x0b\xffn.\x0b\xffm-\x0b\xffr2\x0c\xffq1\x0c\xffo/\x0b\xffm-\x0b\xffk+\n\xffi*\n\xffi*\n\xffi*\n\xffi*\n\xffj*\n\xffj*\n\xffj+\n\xffj*\n\xffi*\n\xffi*\n\xffj*\n\xffi*\n\xffk+\n\xffk,\n\xffj+\n\xffi)\n\xffh)\t\xffh)\t\xffh)\t\xffg(\t\xffg'\t\xfff'\t\xffe&\t\xffe%\x08\xffd$\x08\xffd%\x08\xffd%\x08\xffd$\x08\xffc$\x08\xffd%\x08\xffd%\x08\xffd%\x08\xffe%\x08\xffg'\t\xfff&\t\xfff&\t\xffe&\t\xffe&\t\xffe&\t\xffg(\t\xffi)\n\xffi*\n\xffj+\n\xffj*\n\xffi)\n\xffh(\t\xffg'\t\xfff&\t\xffe&\t\xfff&\t\xfff&\t\xfff&\t\xffg(\t\xffk+\n\xffk+\n\xffl-\x0b\xffl,\x0b\xffl,\x0b\xffk+\n\xffp0\x0c\xffp0\x0c\xffn/\x0b\xffl,\x0b\xffj+\n\xffi*\n\xffi)\n\xffi)\n\xffi*\n\xffj*\n\xffj*\n\xffj*\n\xffj+\n\xffj*\n\xffj*\n\xffi*\n\xffi*\n\xffi*\n\xffj*\n\xffh(\t\xffg(\t\xffg(\t\xffg(\t\xffg(\t\xffg(\t\xffg(\t\xfff'\t\xffe&\t\xffd%\x08\xffd%\x08\xffe&\t\xffe%\x08\xffd$\x08\xffd%\x08\xfff&\t\xffg'\t\xfff&\t\xfff'\t\xfff'\t\xffg(\t\xfff'\t\xffe&\t\xfff&\t\xffg'\t\xffi)\n\xffj*\n\xffj+\n\xffn.\x0b\xffl,\x0b\xffi*\n\xffh(\t\xffg'\t\xfff&\t\xffe&\t\xffe&\t\xffe&\t\xfff'\t\xffh)\t\xffj*\n\xffk+\n\xffk+\n\xffj*\n\xffj*\n\xffj*\n\xffn.\x0b\xffn.\x0b\xffm-\x0b\xffj+\n\xffi*\n\xffi*\n\xffi)\n\xffi*\n\xffi*\n\xffj*\n\xffj*\n\xffj+\n\xffj*\n\xffi*\n\xffi*\n\xffj*\n\xffi*\n\xffj*\n\xffi)\n\xfff'\t\xffg'\t\xffg(\t\xffg(\t\xffh(\t\xffh(\t\xffg(\t\xffg'\t\xfff&\t\xffd%\x08\xffd%\x08\xffd%\x08\xffe%\x08\xffe%\x08\xffe&\t\xffh(\t\xffi)\n\xffh)\n\xffg(\t\xffg(\t\xffg(\t\xfff'\t\xfff&\t\xfff&\t\xfff'\t\xffi)\n\xffj+\n\xffl,\n\xffq1\x0c\xffn.\x0b\xffj*\n\xffh)\n\xffg(\t\xfff&\t\xffe&\t\xffe&\t\xffe&\t\xffg'\t\xffh)\t\xffh(\t\xffg(\t\xffh(\t\xffi)\n\xffk+\n\xffl,\x0b\xffl,\x0b\xffl,\x0b\xffj+\n\xffj*\n\xffi)\n\xffh)\t\xffi)\n\xffh)\n\xffi)\n\xffi*\n\xffj*\n\xffj*\n\xffj*\n\xffj*\n\xffj*\n\xffj*\n\xffj*\n\xffj*\n\xffg(\t\xfff'\t\xffg'\t\xffg(\t\xffh(\t\xffi)\n\xffi)\n\xffg(\t\xffg'\t\xffg'\t\xfff&\t\xffe&\t\xffe%\x08\xfff&\t\xfff'\t\xffg(\t\xffi)\n\xffj+\n\xffj+\n\xffi*\n\xffi)\n\xffh(\t\xfff'\t\xfff&\t\xfff'\t\xffg'\t\xffh)\n\xffj*\n\xffm-\x0b\xffr2\x0c\xffp0\x0c\xffk+\n\xffi*\n\xffh)\t\xffg(\t\xfff'\t\xffe%\x08\xffe&\t\xfff'\t\xffh(\t\xfff&\t\xffh)\t\xffi*\n\xffk+\n\xffl,\x0b\xffk,\n\xffj*\n\xffi)\n\xffi)\n\xffi*\n\xffh)\t\xffh(\t\xffh(\t\xffh(\t\xffh)\t\xffi)\n\xffi)\n\xffi*\n\xffj*\n\xffj*\n\xffj+\n\xffj+\n\xffi*\n\xffj*\n\xffh)\t\xfff'\t\xfff'\t\xffg'\t\xffi)\n\xffj*\n\xffj*\n\xffh)\t\xffh(\t\xffg(\t\xffg'\t\xfff'\t\xfff'\t\xffg'\t\xffh(\t\xffi)\n\xffk+\n\xffk+\n\xffk+\n\xffj+\n\xffi*\n\xffh)\n\xffg'\t\xffg'\t\xffg(\t\xffg(\t\xffg(\t\xffi*\n\xffm.\x0b\xffo/\x0b\xffr2\x0c\xffq1\x0c\xffp0\x0c\xffn.\x0b\xffk,\n\xffh(\t\xffe&\t\xffe&\t\xfff&\t\xfff&\t\xffg'\t\xffi)\n\xffi*\n\xffk,\n\xffl,\n\xffk,\n\xffk+\n\xffi)\n\xffh)\n\xffh)\n\xffh)\t\xffi*\n\xffg(\t\xffg(\t\xffh(\t\xffg(\t\xffg(\t\xffh(\t\xffh)\n\xffi*\n\xffi*\n\xffj*\n\xffj*\n\xffi)\n\xffh(\t\xfff'\t\xfff'\t\xfff'\t\xffi)\n\xffk,\n\xffl,\n\xffi*\n\xffi)\n\xffi)\n\xffh(\t\xffg'\t\xffg(\t\xffh)\n\xffi*\n\xffk+\n\xffl,\n\xffl,\n\xffk+\n\xffj*\n\xffi*\n\xffi)\n\xffh)\t\xffh)\n\xffj*\n\xffj+\n\xffk+\n\xffl,\n\xffm-\x0b\xffo/\x0b\xffp0\x0c\xffq1\x0c\xffr2\x0c\xffo/\x0b\xffn.\x0b\xffj+\n\xfff&\t\xffe%\x08\xfff&\t\xffe%\t\xffg'\t\xffi)\n\xffi)\n\xffk+\n\xffk+\n\xffk+\n\xffk,\n\xffj+\n\xffj*\n\xffi)\n\xffj*\n\xffj*\n\xffh(\t\xffg(\t\xffg(\t\xffg'\t\xffg'\t\xfff'\t\xfff&\t\xffe&\t\xffe&\t\xffg(\t\xffi*\n\xffj*\n\xffi*\n\xffg(\t\xfff&\t\xfff'\t\xffi*\n\xffl-\x0b\xffm-\x0b\xffk+\n\xffj+\n\xffj*\n\xffh)\n\xffh)\t\xffh)\n\xffj*\n\xffl,\n\xffl,\x0b\xffl-\x0b\xffl,\n\xffk+\n\xffj+\n\xffj*\n\xffi*\n\xffj+\n\xffk+\n\xffl,\n\xffl,\x0b\xffl,\x0b\xffl,\x0b\xffl-\x0b\xffn.\x0b\xffn.\x0b\xffo/\x0b\xffp0\x0c\xffo0\x0c\xffm.\x0b\xffk+\n\xfff'\t\xffe%\x08\xfff&\t\xffe&\t\xffe&\t\xffi)\n\xffi)\n\xffj+\n\xffk+\n\xffk+\n\xffk+\n\xffj+\n\xffk+\n\xffj+\n\xffi*\n\xffi)\n\xffi*\n\xffh)\n\xffg(\t\xffg(\t\xffg'\t\xfff'\t\xfff&\t\xffe&\t\xffe&\t\xffe%\x08\xffg'\t\xffg(\t\xffh(\t\xfff'\t\xfff'\t\xffh)\n\xffk+\n\xffm-\x0b\xffm.\x0b\xffm-\x0b\xffl,\x0b\xffk+\n\xffi*\n\xffi)\n\xffi*\n\xffk+\n\xffm-\x0b\xffm-\x0b\xffm-\x0b\xffl,\x0b\xffl,\n\xffk+\n\xffj*\n\xffl,\x0b\xffn/\x0b\xffn.\x0b\xffo/\x0b\xffo/\x0b\xffm-\x0b\xffl-\x0b\xffl-\x0b\xffn.\x0b\xffo/\x0b\xffo/\x0b\xffp0\x0c\xffp0\x0c\xffo/\x0b\xffl,\x0b\xffh(\t\xffd%\x08\xffe&\t\xffe&\t\xffd%\x08\xffg(\t\xffi)\n\xffi*\n\xffj+\n\xffk+\n\xffk+\n\xffk+\n\xffk+\n\xffj*\n\xffi)\n\xffh(\t\xffi)\n\xffi*\n\xffh)\t\xffh(\t\xffg'\t\xfff'\t\xfff'\t\xfff'\t\xfff&\t\xffe&\t\xffd%\x08\xffe%\x08\xffe%\x08\xfff'\t\xffi)\n\xffi*\n\xffl-\x0b\xffl-\x0b\xffl-\x0b\xffn.\x0b\xffm-\x0b\xffk+\n\xffj*\n\xffi*\n\xffj*\n\xffl,\n\xffm-\x0b\xffn.\x0b\xffm-\x0b\xffl-\x0b\xffl-\x0b\xffl,\x0b\xffm.\x0b\xffo/\x0b\xffp0\x0c\xffp0\x0c\xffq1\x0c\xffq1\x0c\xffo/\x0b\xffm.\x0b\xffm-\x0b\xffm-\x0b\xffn.\x0b\xffm.\x0b\xffm-\x0b\xffn.\x0b\xffl,\x0b\xffn.\x0b\xffj+\n\xffd%\x08\xffd%\x08\xffe&\t\xffe&\t\xfff'\t\xffh(\t\xffi*\n\xffj*\n\xffj*\n\xffj+\n\xffj*\n\xffh)\n\xffh(\t\xffh(\t\xffh(\t\xffi)\n\xffj*\n\xffi*\n\xffg(\t\xfff'\t\xffg'\t\xffg(\t\xffg'\t\xfff'\t\xffe&\t\xffe&\t\xffe%\t\xfff&\t\xffh(\t\xffj+\n\xffk+\n\xffi*\n\xffj+\n\xffk,\n\xffm.\x0b\xffm.\x0b\xffk+\n\xffi*\n\xffj*\n\xffj+\n\xffl,\x0b\xffm-\x0b\xffn.\x0b\xffn.\x0b\xffm.\x0b\xffn.\x0b\xffn.\x0b\xffn.\x0b\xffp0\x0c\xffs3\x0c\xffr2\x0c\xffs3\r\xffs3\r\xffq1\x0c\xffo/\x0b\xffm.\x0b\xffm.\x0b\xffm-\x0b\xffm-\x0b\xffm-\x0b\xffm-\x0b\xffl-\x0b\xffn.\x0b\xffm-\x0b\xffg'\t\xffe%\x08\xfff'\t\xffg'\t\xffg'\t\xffg(\t\xffh)\n\xffi*\n\xffj*\n\xffh(\t\xffg(\t\xffh(\t\xffh(\t\xffh(\t\xffi*\n\xffj*\n\xffj*\n\xffi*\n\xffh(\t\xffg'\t\xffg'\t\xffg(\t\xffg(\t\xfff'\t\xfff&\t\xffe&\t\xffe%\t\xfff&\t\xffg'\t\xffh(\t\xffj*\n\xffj*\n\xffk+\n\xffk,\n\xffl-\x0b\xffl,\x0b\xffj*\n\xffi*\n\xffi*\n\xffk+\n\xffl,\x0b\xffm.\x0b\xffn.\x0b\xffn.\x0b\xffn.\x0b\xffo/\x0b\xffo/\x0b\xffp0\x0c\xffr2\x0c\xffs3\r\xffq1\x0c\xffs3\x0c\xffs3\r\xffq1\x0c\xffo/\x0b\xffm-\x0b\xffl-\x0b\xffl-\x0b\xffk,\n\xffk,\n\xffk+\n\xffj+\n\xffj*\n\xffl,\x0b\xffi)\n\xfff&\t\xffg'\t\xfff&\t\xfff'\t\xffh(\t\xffi)\n\xffi)\n\xffi)\n\xffg(\t\xffh)\t\xffh)\t\xffh(\t\xffh(\t\xffh)\t\xffh(\t\xffi)\n\xffi*\n\xffi)\n\xffi)\n\xffi)\n\xffh)\t\xffg(\t\xffg'\t\xfff'\t\xfff&\t\xffe&\t\xffe&\t\xffg(\t\xffi)\n\xffj*\n\xffj*\n\xffj*\n\xffk+\n\xffj*\n\xffi)\n\xffh)\n\xffi)\n\xffi*\n\xffj+\n\xffl,\x0b\xffm-\x0b\xffm.\x0b\xffn.\x0b\xffn/\x0b\xffp0\x0c\xffr2\x0c\xfft4\r\xfft4\r\xffs3\x0c\xffr2\x0c\xffr2\x0c\xffq1\x0c\xffn/\x0b\xffm.\x0b\xffl-\x0b\xffl-\x0b\xffl,\n\xffj*\n\xffi)\n\xffh)\t\xffg(\t\xffi)\n\xffj+\n\xffg(\t\xffe&\t\xfff'\t\xfff'\t\xffg'\t\xffi)\n\xffi*\n\xffi)\n\xffi)\n\xffg'\t\xffh(\t\xffg(\t\xffg(\t\xffh(\t\xffh(\t\xffh)\t\xffi)\n\xffi*\n\xffi*\n\xffj*\n\xffj+\n\xffk+\n\xffi)\n\xffh(\t\xffg(\t\xffg(\t\xffg'\t\xfff&\t\xfff&\t\xffg'\t\xffh)\n\xffi)\n\xffh(\t\xffg'\t\xffg'\t\xffg'\t\xffg(\t\xffh)\n\xffi*\n\xffj+\n\xffl,\n\xffm-\x0b\xffm-\x0b\xffm.\x0b\xffn/\x0b\xffp0\x0c\xffq1\x0c\xffs3\r\xfft4\r\xfft4\r\xffs3\r\xffp1\x0c\xffn.\x0b\xffk+\n\xffj+\n\xffj*\n\xffk,\n\xffk+\n\xffh(\t\xffg(\t\xffg'\t\xffg'\t\xffh)\t\xffi)\n\xffg(\t\xfff'\t\xfff&\t\xfff'\t\xffg'\t\xffi)\n\xffi*\n\xffh)\n\xffi)\n\xffg(\t\xffg(\t\xffg(\t\xffh(\t\xffh)\n\xffi)\n\xffi*\n\xffj+\n\xffl,\n\xffl,\n\xffk,\n\xffl,\x0b\xffm-\x0b\xffm-\x0b\xffj+\n\xffj*\n\xffj*\n\xffh)\n\xffh(\t\xffg(\t\xffg'\t\xffg(\t\xffh(\t\xfff&\t\xffe%\x08\xffe&\t\xfff&\t\xffg'\t\xffh(\t\xffh)\t\xffj*\n\xffk+\n\xffk,\n\xffl,\x0b\xffm-\x0b\xffn.\x0b\xffo0\x0c\xffp0\x0c\xffp0\x0c\xffq1\x0c\xffr2\x0c\xffr2\x0c\xffo/\x0b\xffj+\n\xffh(\t\xffh(\t\xffh(\t\xffk+\n\xffi)\n\xfff&\t\xffe&\t\xffe&\t\xffe&\t\xffg'\t\xffj*\n\xffi)\n\xffh(\t\xfff'\t\xffe&\t\xfff'\t\xffg(\t\xffh(\t\xffg(\t\xffh)\n\xffg(\t\xffg(\t\xffh(\t\xffh)\n\xffi*\n\xffj+\n\xffl,\n\xffm-\x0b\xffn.\x0b\xffm.\x0b\xffl,\x0b\xffm-\x0b\xffp0\x0c\xffp0\x0c\xffl-\x0b\xffl-\x0b\xffl,\x0b\xffi*\n\xffh)\n\xffi)\n\xffh)\n\xffi)\n\xffi)\n\xfff&\t\xffd%\x08\xffd%\x08\xffe%\x08\xffe&\t\xfff&\t\xffh(\t\xffi)\n\xffi*\n\xffj+\n\xffl,\n\xffl-\x0b\xffn.\x0b\xffn/\x0b\xffo/\x0b\xffo/\x0b\xffn.\x0b\xffo0\x0c\xffn/\x0b\xffl-\x0b\xffj+\n\xffg(\t\xfff'\t\xfff'\t\xffj*\n\xfff'\t\xffd%\x08\xffd%\x08\xffd$\x08\xffe%\x08\xffh(\t\xffj*\n\xffi)\n\xffg(\t\xffe&\t\xffe&\t\xfff&\t\xfff'\t\xfff'\t\xffg(\t\xffg(\t\xffg(\t\xffh(\t\xffi)\n\xffj*\n\xffk,\n\xffl-\x0b\xffm.\x0b\xffo/\x0b\xffp0\x0c\xffq1\x0c\xffq1\x0c\xffq1\x0c\xffo/\x0c\xffo/\x0b\xffo/\x0b\xffn.\x0b\xffm.\x0b\xffj+\n\xffj*\n\xffj+\n\xffj+\n\xffk+\n\xffj*\n\xffh)\t\xffg'\t\xffg'\t\xfff&\t\xffd%\x08\xffe&\t\xfff'\t\xffg(\t\xffh)\t\xffi*\n\xffk+\n\xffl,\x0b\xffm-\x0b\xffn.\x0b\xffm-\x0b\xffl-\x0b\xffj+\n\xffg'\t\xffg(\t\xffg(\t\xffg(\t\xffe&\t\xffe%\x08\xfff&\t\xffh)\t\xffd%\x08\xffd$\x08\xffc$\x08\xffc$\x08\xffe&\t\xffi*\n\xffh)\n\xffg'\t\xfff&\t\xffe&\t\xffd%\x08\xffe&\t\xffe&\t\xfff'\t\xffg'\t\xffg'\t\xffh(\t\xffi*\n\xffk+\n\xffl,\x0b\xffm-\x0b\xffn.\x0b\xffo/\x0b\xffp0\x0c\xffp1\x0c\xffq1\x0c\xffp0\x0c\xffo/\x0b\xffn.\x0b\xffo/\x0b\xffq1\x0c\xffq1\x0c\xffn.\x0b\xffm-\x0b\xffl,\n\xffl,\x0b\xffm-\x0b\xffl-\x0b\xffk+\n\xffj*\n\xffh)\t\xffg'\t\xfff&\t\xffd%\x08\xffd$\x08\xffe&\t\xffg'\t\xffg(\t\xffh)\t\xffj*\n\xffk+\n\xffl,\x0b\xffl,\x0b\xffk+\n\xffj*\n\xffg'\t\xffe%\x08\xffe%\x08\xfff&\t\xffd%\x08\xffc$\x08\xffd$\x08\xffe&\t\xfff'\t\xffd$\x08\xffe%\x08\xffe%\x08\xffd$\x08\xfff&\t\xffi)\n\xffe&\t\xffd%\x08\xffd$\x08\xffd$\x08\xffc$\x08\xffd%\x08\xffe&\t\xfff'\t\xfff'\t\xffg'\t\xffh)\t\xffj+\n\xffl,\x0b\xffm-\x0b\xffn.\x0b\xffo/\x0b\xffo/\x0b\xffo/\x0b\xffp0\x0c\xffp0\x0c\xffp0\x0c\xffn.\x0b\xffn.\x0b\xffn/\x0b\xffo/\x0c\xffp0\x0c\xffo0\x0c\xffp1\x0c\xffp0\x0c\xffo/\x0c\xffn.\x0b\xffm-\x0b\xffk+\n\xffi)\n\xffh(\t\xfff'\t\xffd$\x08\xffc$\x08\xffd%\x08\xfff&\t\xffg'\t\xffg(\t\xffh(\t\xffh)\n\xffi*\n\xffi*\n\xffi*\n\xffi)\n\xffg(\t\xffe%\x08\xffd$\x08\xffc$\x08\xffd%\x08\xffc$\x08\xffd$\x08\xffd%\x08\xffe&\t\xffe&\t\xffd$\x08\xffe%\x08\xffe&\t\xffd%\x08\xffe&\t\xffe&\t\xffd%\x08\xffd%\x08\xffd%\x08\xffd$\x08\xffe%\x08\xffe%\x08\xffe&\t\xfff'\t\xffg'\t\xffg(\t\xffh)\n\xffk,\n\xffm-\x0b\xffn.\x0b\xffo0\x0c\xffp0\x0c\xffo/\x0b\xffn.\x0b\xffo/\x0b\xffp0\x0c\xffo/\x0b\xffn.\x0b\xffm.\x0b\xffm-\x0b\xffn.\x0b\xffo/\x0b\xffp0\x0c\xffq1\x0c\xffq1\x0c\xffp0\x0c\xffn.\x0b\xffl,\n\xffj+\n\xffi)\n\xffg'\t\xffd%\x08\xffc$\x08\xffc$\x08\xffd%\x08\xffe&\t\xffg'\t\xffg(\t\xffg(\t\xffh)\t\xffh)\t\xffh(\t\xffg(\t\xffg'\t\xffe%\x08\xffd$\x08\xffe%\x08\xffd%\x08\xffc$\x08\xffc$\x08\xffc$\x08\xffd$\x08\xffd%\x08\xffd$\x08\xffd$\x08\xffd%\x08\xffe&\t\xffc$\x08\xffe&\t\xffd$\x08\xffe&\t\xfff'\t\xfff&\t\xfff'\t\xffh(\t\xfff'\t\xffg'\t\xffh)\n\xffi*\n\xffi*\n\xffk+\n\xffm-\x0b\xffn.\x0b\xffo/\x0b\xffo0\x0c\xffp0\x0c\xffo/\x0b\xffl,\x0b\xffl-\x0b\xffm.\x0b\xffm.\x0b\xffm.\x0b\xffn.\x0b\xffn.\x0b\xffn.\x0b\xffo/\x0b\xffn.\x0b\xffn.\x0b\xffn.\x0b\xffm.\x0b\xffm-\x0b\xffl,\x0b\xffk+\n\xffi*\n\xffg(\t\xffe&\t\xffd%\x08\xffd%\x08\xffe%\x08\xffe&\t\xfff'\t\xffg'\t\xffg(\t\xffh(\t\xffg(\t\xfff&\t\xffe&\t\xffe%\x08\xffd%\x08\xfff&\t\xffg(\t\xffe%\t\xffd%\x08\xffd%\x08\xffd%\x08\xffe&\t\xffe&\t\xffd%\x08\xffd$\x08\xffd$\x08\xffd$\x08\xffd%\x08\xffe&\t\xffd%\x08\xffi)\n\xffi*\n\xffl,\x0b\xffk+\n\xffj+\n\xffi*\n\xffi*\n\xffj+\n\xffk+\n\xffl,\x0b\xffl,\x0b\xffm-\x0b\xffn.\x0b\xffn.\x0b\xffo/\x0b\xffo/\x0b\xffn.\x0b\xffj*\n\xffj+\n\xffl,\x0b\xffl-\x0b\xffm-\x0b\xffm-\x0b\xffn.\x0b\xffn.\x0b\xffo/\x0b\xffn.\x0b\xffm-\x0b\xffm-\x0b\xffl-\x0b\xffl-\x0b\xffl,\x0b\xffl,\n\xffk+\n\xffg(\t\xffg'\t\xfff'\t\xfff&\t\xffe&\t\xfff&\t\xfff'\t\xfff'\t\xfff'\t\xffe&\t\xffe&\t\xffe&\t\xffe%\x08\xffd%\x08\xfff&\t\xffi*\n\xffi*\n\xffg'\t\xfff'\t\xfff'\t\xffg(\t\xffi)\n\xffi)\n\xffg(\t\xffe&\t\xffd%\x08\xffd$\x08\xffd%\x08\xffd$\x08\xffg(\t\xffj+\n\xffm-\x0b\xffo/\x0b\xffm-\x0b\xffm-\x0b\xffk+\n\xffk+\n\xffk+\n\xffk+\n\xffk,\n\xffl,\x0b\xffm-\x0b\xffm-\x0b\xffm-\x0b\xffm-\x0b\xffl,\x0b\xffk+\n\xffh)\n\xffi*\n\xffk+\n\xffk,\n\xffl,\x0b\xffl-\x0b\xffm-\x0b\xffn.\x0b\xffo/\x0c\xffn.\x0b\xffm-\x0b\xffm-\x0b\xffm.\x0b\xffm-\x0b\xffl,\x0b\xffm-\x0b\xffl,\n\xffi)\n\xffi*\n\xffi*\n\xffi)\n\xffh(\t\xffg(\t\xffg(\t\xffg'\t\xffg'\t\xfff'\t\xfff'\t\xffg'\t\xffe&\t\xfff'\t\xffi*\n\xffj+\n\xffj+\n\xffi*\n\xffi*\n\xffi*\n\xffj*\n\xffk+\n\xffj+\n\xffi)\n\xffh)\n\xffg(\t\xffe%\x08\xffc$\x08\xffd%\x08\xffj*\n\xffl,\x0b\xffn/\x0b\xffp0\x0c\xffo/\x0b\xffn.\x0b\xffk,\n\xffk+\n\xffk+\n\xffj+\n\xffk+\n\xffk,\n\xffl,\x0b\xffm-\x0b\xffm-\x0b\xffk+\n\xffi)\n\xffh(\t\xffg(\t\xffh)\n\xffj*\n\xffk+\n\xffk+\n\xffl,\x0b\xffm-\x0b\xffn.\x0b\xffn/\x0b\xffn/\x0b\xffo/\x0b\xffo/\x0b\xffm.\x0b\xffm-\x0b\xffl,\x0b\xffl,\x0b\xffl,\n\xffk,\n\xffl,\x0b\xffm-\x0b\xffm-\x0b\xffk,\n\xffi*\n\xffi)\n\xffi)\n\xffh)\t\xffg(\t\xffg(\t\xffg'\t\xfff&\t\xffh)\t\xffi*\n\xffk+\n\xffk+\n\xffk+\n\xffk,\n\xffk,\n\xffl,\n\xffl,\n\xffj+\n\xffk+\n\xffl,\x0b\xffj+\n\xffg'\t\xffd%\x08\xffe&\t\xffj+\n\xffm-\x0b\xffo0\x0c\xffp0\x0c\xffp0\x0c\xffm-\x0b\xffj+\n\xffk+\n\xffj*\n\xffj*\n\xffi*\n\xffi*\n\xffj*\n\xffj+\n\xffk+\n\xffi*\n\xffg'\t\xfff'\t\xfff'\t\xffg(\t\xffh)\n\xffj*\n\xffj+\n\xffl,\n\xffl-\x0b\xffm-\x0b\xffm-\x0b\xffm-\x0b\xffm-\x0b\xffm.\x0b\xffm-\x0b\xffl-\x0b\xffl-\x0b\xffm-\x0b\xffn/\x0b\xffp0\x0c\xffp0\x0c\xffp0\x0c\xffp0\x0c\xffo/\x0b\xffl,\x0b\xffl,\x0b\xffk,\n\xffj*\n\xffi)\n\xffh)\n\xffg(\t\xffg'\t\xffi)\n\xffk+\n\xffk+\n\xffk+\n\xffk+\n\xffl,\n\xffl-\x0b\xffm-\x0b\xffl,\x0b\xffk+\n\xffl,\x0b\xffm-\x0b\xffl,\n\xffh)\n\xffe&\t\xfff&\t\xffj*\n\xffl,\x0b\xffn.\x0b\xffo0\x0c\xffp0\x0c\xffm-\x0b\xffj*\n\xffj+\n\xffk+\n\xffj+\n\xffi)\n\xffh)\t\xffh(\t\xffh(\t\xffg(\t\xffh)\t\xffg(\t\xfff'\t\xfff'\t\xfff'\t\xffg'\t\xffh(\t\xffj+\n\xffl,\n\xffl,\n\xffl,\n\xffk,\n\xffk,\n\xffl,\n\xffl,\n\xffk,\n\xffl,\x0b\xffm-\x0b\xffo/\x0b\xffp0\x0c\xffr2\x0c\xffs3\r\xfft4\r\xfft4\r\xffr2\x0c\xffs3\r\xffr2\x0c\xffn/\x0b\xffl,\n\xffj+\n\xffk+\n\xffj*\n\xffi)\n\xffj+\n\xffk+\n\xffk+\n\xffk+\n\xffk+\n\xffk,\n\xffl,\x0b\xffl-\x0b\xffk,\n\xffk+\n\xffk,\n\xffl,\x0b\xffl-\x0b\xffj+\n\xffg(\t\xffh)\t\xffk+\n\xffl,\x0b\xffj+\n\xffl,\n\xffo0\x0c\xffo/\x0b\xffn.\x0b\xffm-\x0b\xffl-\x0b\xffl,\x0b\xffl,\n\xffj*\n\xffh(\t\xffg'\t\xfff'\t\xfff'\t\xfff'\t\xffg'\t\xffg(\t\xffh(\t\xffh)\n\xffi*\n\xffk+\n\xffl,\x0b\xffl,\x0b\xffk,\n\xffk+\n\xffj+\n\xffk+\n\xffk+\n\xffk,\n\xffl,\x0b\xffm-\x0b\xffn/\x0b\xffp0\x0c\xffr2\x0c\xfft4\r\xffu5\r\xffv6\r\xffv6\x0e\xffu5\r\xffr2\x0c\xffo/\x0b\xffm-\x0b\xffl,\n\xffl,\n\xffl,\n\xffk,\n\xffk+\n\xffk,\n\xffk+\n\xffj*\n\xffi*\n\xffj*\n\xffk+\n\xffk+\n\xffj+\n\xffk+\n\xffj*\n\xffk,\n\xffl,\x0b\xffk+\n\xffj*\n\xffk+\n\xffk+\n\xffj*\n\xffh(\t\xffh)\n\xffl,\x0b\xffq1\x0c\xffp0\x0c\xffp0\x0c\xffo/\x0b\xffn/\x0b\xffm-\x0b\xffk+\n\xffj*\n\xffi)\n\xffh(\t\xffg'\t\xfff'\t\xfff'\t\xffg'\t\xffg'\t\xffg(\t\xffh(\t\xffi)\n\xffk+\n\xffl,\n\xffl,\n\xffk,\n\xffk+\n\xffk+\n\xffk,\n\xffl,\x0b\xffm-\x0b\xffn.\x0b\xffo/\x0b\xffp0\x0c\xffq1\x0c\xffq1\x0c\xffs3\r\xffw6\x0e\xffr2\x0c\xffo/\x0b\xffn.\x0b\xffn.\x0b\xffl-\x0b\xffl,\n\xffl,\n\xffl,\x0b\xffk,\n\xffk+\n\xffk,\n\xffk+\n\xffi*\n\xffg(\t\xffg'\t\xffh(\t\xffh)\t\xffk+\n\xffj+\n\xffi)\n\xffk+\n\xffk,\n\xffj+\n\xffj*\n\xffj+\n\xffi)\n\xffg(\t\xffg(\t\xffg(\t\xffm-\x0b\xffq1\x0c\xffq1\x0c\xffq1\x0c\xffp0\x0c\xffo/\x0c\xffm-\x0b\xffk,\n\xffj+\n\xffj*\n\xffi*\n\xffi)\n\xffh(\t\xffg'\t\xfff'\t\xffg'\t\xffg(\t\xffg(\t\xffh)\t\xffj*\n\xffl,\n\xffm-\x0b\xffm-\x0b\xffm-\x0b\xffl-\x0b\xffl-\x0b\xffl-\x0b\xffl-\x0b\xffm-\x0b\xffm.\x0b\xffo/\x0b\xffq1\x0c\xffs3\x0c\xffs3\r\xffq1\x0c\xffo/\x0b\xffo/\x0b\xffn.\x0b\xffk,\n\xffl-\x0b\xffk,\n\xffk,\n\xffk+\n\xffk+\n\xffk+\n\xffj+\n\xffk+\n\xffj*\n\xffh(\t\xffe&\t\xfff&\t\xffh(\t\xffk+\n\xffh(\t\xffg(\t\xffj+\n\xffk+\n\xffj+\n\xffj+\n\xffi*\n\xffh(\t\xffg(\t\xffg(\t\xffh(\t\xffn/\x0b\xffp0\x0c\xffp0\x0c\xffp1\x0c\xffq1\x0c\xffp0\x0c\xffm-\x0b\xffl,\n\xffk+\n\xffj+\n\xffj+\n\xffj*\n\xffi*\n\xffh)\t\xffg(\t\xffg'\t\xffg(\t\xffg(\t\xffg(\t\xffh(\t\xffi)\n\xffj*\n\xffk+\n\xffk,\n\xffk,\n\xffk,\n\xffl,\x0b\xffm-\x0b\xffn.\x0b\xffo/\x0b\xffq1\x0c\xffs3\r\xfft4\r\xffu4\r\xffu4\r\xffv5\r\xfft4\r\xffp0\x0c\xffn.\x0b\xffl,\x0b\xffl,\x0b\xffl,\x0b\xffk,\n\xffk+\n\xffk+\n\xffi*\n\xffi)\n\xffi)\n\xffg(\t\xfff&\t\xffe&\t\xffg(\t\xffh)\t\xfff'\t\xffg(\t\xffl,\n\xffk+\n\xffj+\n\xffj*\n\xffi*\n\xffi)\n\xffg(\t\xffg'\t\xffg(\t\xffm-\x0b\xffn/\x0b\xffn.\x0b\xffn.\x0b\xffo0\x0c\xffp0\x0c\xffm-\x0b\xffl,\n\xffj+\n\xffi*\n\xffi)\n\xffi*\n\xffj*\n\xffi*\n\xffh)\t\xffg(\t\xffg(\t\xffg(\t\xffg(\t\xffg(\t\xffg(\t\xffh(\t\xffi)\n\xffj*\n\xffj+\n\xffk+\n\xffl,\x0b\xffm-\x0b\xffo/\x0b\xffo/\x0b\xffq1\x0c\xffs3\r\xffu5\r\xffv6\r\xffw6\x0e\xffv6\x0e\xffu5\r\xffs3\x0c\xffp0\x0c\xffm.\x0b\xffm-\x0b\xffm-\x0b\xffk,\n\xffk+\n\xffj+\n\xffi*\n\xffh)\n\xffg(\t\xfff'\t\xffe%\x08\xffe%\x08\xfff&\t\xffg(\t\xffe&\t\xffj*\n\xffl,\x0b\xffk+\n\xffj+\n\xffj*\n\xffi)\n\xffh)\t\xffh(\t\xffg(\t\xffg(\t\xffk+\n\xff"
class OBJECT_OT_update_islands(bpy.types.Operator):
    """Attempt to connect MML client to server."""
    bl_idname = "image.mml_update_islands"
    bl_label = "MML Update Islands"

    
    @classmethod
    def poll(cls, context):
        return context.object and context.mode == 'EDIT_MESH'


    def execute(self, context):
        t = time.time()
        bm = bmesh.from_edit_mesh(context.object.data)
        uv_layer = bm.loops.layers.uv[context.object.data.uv_layers.active.name]

        selected_loops = set()
        for vert in bm.verts:
            for loop in vert.link_loops:
                if loop[uv_layer].select:
                    selected_loops.add(loop)

        image = context.area.spaces.active.image
        island_data = { 'island_to_points' : {}, 'points_to_island' : {} }  # Sets are not JSON serializable
        island_id = 0

        while len(selected_loops) > 0:
            random_loop = selected_loops.pop()
            island = mml_main.Island(bm, uv_layer, random_loop)
            selected_loops = selected_loops.difference(island.get_loops())
            inner_points = island.find_inner_points(uv_layer, image.size)
            island_data['island_to_points'][island_id] = list(inner_points)
            island_id += 1

        image.mml_properties.island_data = json.dumps(island_data)
        mml_main.MML.inform(f"Island data update finished. Found {island_id} islands in {time.time() - t:.2f} seconds.") # Since the while loop has index_id += 1 at the end, the resulting value will correspond to the number of islands
        return {'FINISHED'}
